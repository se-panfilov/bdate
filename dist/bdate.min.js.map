{"version":3,"sources":["bdate.js"],"names":["angular","module","directive","$filter","bDataFactory","bDateUtils","$document","$interval","restrict","replace","templateUrl","scope","bModel","bSource","bRootClasses","bInputClasses","bButtonClasses","bPopupClasses","bMonthNames","bDaysNames","placeholder","controller","$scope","_generateRandomId","setLocalizedData","Math","random","toString","substr","dateStoreId","isDataReady","$watch","isDataValid","setData","setMonthNames","setDaysNames","link","elem","doNotUpdateModelTwice","externalLoadInterval","processClick","setModelFromExternal","date","viewed","model","bModelDate","isEmptyModel","isSameDate","stringToDate","data","format","delimiter","isDate","day","getDate","month","getMonth","year","getFullYear","cancel","newVal","oldVal","dateTime","formattedDate","equals","Date","getTime","event","clickedElem","isOpen","isOutsideClick","popupElem","popup","state","target","contains","$apply","hidePopup","on","togglePopup","factory","MESSAGES","exports","daysNames","name","short","daysNamesArr","isDaysNamesValid","console","error","daysNameNotValid","isArray","isObject","length","monthNames",1,2,3,4,5,6,7,8,9,10,11,12,"monthNamesObj","isMonthNamesValid","monthNameNotValid","Object","keys","storeId","invalidParams","today","years","source","JSON","parse","stringify","sourceDataNotValid","constant","errorOnChangeMonthOrYear","dateNotReady","yearNotExist","popupState","dateModel","getPositionInArray","reloadSelectViewDate","setInitViewedDate","selectDate","setDateModel","dateSource","sourceCheckers","isMonthExist","getFirstYear","getFirstMonth","setViewedDate","yearsList","getYearsAsFlatArr","val","arr","i","viewedYearNumberInArr","selectViewedYear","setFormat","viewedDate","yearNum","monthNum","dayNum","ref","first","last","getLastYear","number","count","getLastMonth","daysTotal","days_total","startDay","start_day","getMonthName","days","getDaysArr","daysOfWeek","get","getShorts","getDaysOfWeekShorts","setToday","_getPrevMonthTailDaysArr","isPrevMonthExist","prevMonthDate","prevMonthDaysCount","result","getPrevMonthObj","unshift","isOtherMonth","isLocked","_getNextMonthTailDaysArr","daysCount","daysArr","daysInWeek","expectedWeeksCount","isNextMonthExist","nextMonthDate","ceil","floor","getNextMonthObj","push","_getMonthDaysArr","_markToday","isToday","currentMonthDaysArr","nextMonthTailDaysArr","prevMonthTailDaysArr","concat","goNextMonth","isForward","nextObj","getNextAvailableMonth","goNextYear","getNextAvailableYear","goToYear","isYearExist","init","makeDateModel","datetime","dateStr","dateItems","dayIndex","formatItems","formatLowerCase","monthIndex","yearIndex","toLowerCase","split","indexOf","isValidDate","isNaN","curMonthNum","isFirstMonth","isFirstYear","lastMonthOfPrevYearNum","prevMonthNum","prevYearNum","firstMonthOfNextYearNum","isLastMonth","isLastYear","nextMonthNum","nextYearNum","min","apply","max","getYear","run","$templateCache","put"],"mappings":"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","file":"bdate.min.js","sourcesContent":["angular.module('bdate.datepicker', ['bdate.popup', 'bdate.data', 'bdate.templates']).directive('bdatepicker', ['$filter', 'bDataFactory', 'bDateUtils', '$document', '$interval', function($filter, bDataFactory, bDateUtils, $document, $interval) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'bdate.html',\n    scope: {\n      bModel: '=',\n      bSource: '=',\n      bRootClasses: '@?',\n      bInputClasses: '@?',\n      bButtonClasses: '@?',\n      bPopupClasses: '@?',\n      bMonthNames: '=?',\n      bDaysNames: '=?',\n      placeholder: '@?'\n    },\n    controller: ['$scope', function($scope) {\n      var _generateRandomId, setLocalizedData;\n      _generateRandomId = function() {\n        return Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5);\n      };\n      $scope.dateStoreId = _generateRandomId();\n      $scope.isDataReady = false;\n      $scope.$watch('bSource', function() {\n        if (bDataFactory.isDataValid($scope.bSource)) {\n          bDataFactory.setData($scope.bSource, $scope.dateStoreId);\n          return $scope.isDataReady = true;\n        }\n      }, true);\n      setLocalizedData = function() {\n        if ($scope.bMonthNames) {\n          bDataFactory.setMonthNames($scope.bMonthNames);\n        }\n        if ($scope.bDaysNames) {\n          return bDataFactory.setDaysNames($scope.bDaysNames);\n        }\n      };\n      return (function() {\n        return setLocalizedData();\n      })();\n    }],\n    link: function(scope, elem) {\n      var doNotUpdateModelTwice, externalLoadInterval, processClick, setModelFromExternal;\n      scope.date = {\n        viewed: '',\n        model: {}\n      };\n      doNotUpdateModelTwice = false;\n      setModelFromExternal = function() {\n        var bModelDate, isEmptyModel, isSameDate;\n        isSameDate = scope.bModel === scope.date.viewed;\n        isEmptyModel = scope.bModel === '' || scope.bModel === ' ' || !scope.bModel;\n        if (isSameDate) {\n          return false;\n        }\n        if (isEmptyModel) {\n          scope.date.viewed = null;\n          scope.date.model = null;\n          return;\n        }\n        bModelDate = bDateUtils.stringToDate(scope.bModel, bDataFactory.data[scope.dateStoreId].format, bDataFactory.data[scope.dateStoreId].delimiter);\n        if (!angular.isDate(bModelDate)) {\n          return false;\n        }\n        scope.date.viewed = scope.bModel;\n        doNotUpdateModelTwice = true;\n        return scope.date.model = {\n          day: bModelDate.getDate(),\n          month: bModelDate.getMonth() + 1,\n          year: bModelDate.getFullYear()\n        };\n      };\n      externalLoadInterval = $interval((function() {\n        if (scope.isDataReady) {\n          setModelFromExternal();\n          $interval.cancel(externalLoadInterval);\n          return externalLoadInterval = void 0;\n        }\n      }), 60);\n      scope.$watch('bModel', function(newVal, oldVal) {\n        if (newVal === oldVal) {\n          return;\n        }\n        return setModelFromExternal();\n      });\n      scope.$watch('date.model', function() {\n        var dateTime, formattedDate;\n        if (angular.equals({}, scope.date.model)) {\n          return;\n        }\n        if (doNotUpdateModelTwice) {\n          return doNotUpdateModelTwice = false;\n        }\n        if (scope.date.model) {\n          dateTime = new Date(scope.date.model.year, scope.date.model.month - 1, scope.date.model.day).getTime();\n          formattedDate = $filter('date')(dateTime, bDataFactory.data[scope.dateStoreId].format);\n          scope.date.viewed = formattedDate;\n          return scope.bModel = scope.date.viewed;\n        }\n      });\n      processClick = function(event) {\n        var clickedElem, isOpen, isOutsideClick, popupElem;\n        isOpen = scope.popup.state.isOpen;\n        clickedElem = event.target;\n        popupElem = elem;\n        isOutsideClick = (popupElem !== clickedElem) && !(popupElem[0].contains(clickedElem));\n        if (isOpen && isOutsideClick) {\n          return scope.$apply(function() {\n            return scope.popup.hidePopup();\n          });\n        }\n      };\n      $document.on('click', processClick);\n      return scope.popup = {\n        state: {\n          isOpen: false\n        },\n        togglePopup: function() {\n          if (!scope.isDataReady) {\n            return;\n          }\n          return scope.popup.state.isOpen = !scope.popup.state.isOpen;\n        },\n        hidePopup: function() {\n          return scope.popup.state.isOpen = false;\n        }\n      };\n    }\n  };\n}]);\n\nangular.module('bdate.data', []).factory('bDataFactory', ['MESSAGES', function(MESSAGES) {\n  var exports;\n  return exports = {\n    data: {},\n    daysNames: [\n      {\n        name: 'Monday',\n        short: 'Mon'\n      }, {\n        name: 'Tuesday',\n        short: 'Tue'\n      }, {\n        name: 'Wednesday',\n        short: 'Wed'\n      }, {\n        name: 'Thursday',\n        short: 'Th'\n      }, {\n        name: 'Friday',\n        short: 'Fri'\n      }, {\n        name: 'Saturday',\n        short: 'Sat'\n      }, {\n        name: 'Sunday',\n        short: 'Sun'\n      }\n    ],\n    setDaysNames: function(daysNamesArr) {\n      if (!exports.isDaysNamesValid(daysNamesArr)) {\n        console.error(MESSAGES.daysNameNotValid);\n        return false;\n      }\n      return exports.daysNames = daysNamesArr;\n    },\n    isDaysNamesValid: function(daysNamesArr) {\n      if (!angular.isArray(daysNamesArr) && angular.isObject(daysNamesArr)) {\n        return false;\n      }\n      if (daysNamesArr.length !== 7) {\n        return false;\n      }\n      if (!daysNamesArr[0].name) {\n        return false;\n      }\n      if (!daysNamesArr[0].short) {\n        return false;\n      }\n      return true;\n    },\n    monthNames: {\n      1: {\n        name: 'January',\n        short: 'Jan'\n      },\n      2: {\n        name: 'February',\n        short: 'Feb'\n      },\n      3: {\n        name: 'March',\n        short: 'Mar'\n      },\n      4: {\n        name: 'April',\n        short: 'Apr'\n      },\n      5: {\n        name: 'May',\n        short: 'May'\n      },\n      6: {\n        name: 'June',\n        short: 'Jun'\n      },\n      7: {\n        name: 'July',\n        short: 'July'\n      },\n      8: {\n        name: 'August',\n        short: 'Aug'\n      },\n      9: {\n        name: 'September',\n        short: 'Sep'\n      },\n      10: {\n        name: 'October',\n        short: 'Oct'\n      },\n      11: {\n        name: 'November',\n        short: 'Nov'\n      },\n      12: {\n        name: 'December',\n        short: 'Dec'\n      }\n    },\n    setMonthNames: function(monthNamesObj) {\n      if (!exports.isMonthNamesValid(monthNamesObj)) {\n        console.error(MESSAGES.monthNameNotValid);\n        return false;\n      }\n      return exports.monthNames = monthNamesObj;\n    },\n    isMonthNamesValid: function(monthNamesObj) {\n      if (angular.isArray(monthNamesObj) && !angular.isObject(monthNamesObj)) {\n        return false;\n      }\n      if (Object.keys(monthNamesObj).length !== 12) {\n        return false;\n      }\n      if (!monthNamesObj[1].name) {\n        return false;\n      }\n      if (!monthNamesObj[1].short) {\n        return false;\n      }\n      return true;\n    },\n    isDataReady: function(storeId) {\n      if (!storeId) {\n        return console.error(MESSAGES.invalidParams);\n      }\n      return !!exports.data[storeId] && exports.isDataValid(exports.data[storeId]);\n    },\n    isDataValid: function(data) {\n      if (!data || (angular.equals({}, data))) {\n        return false;\n      }\n      if (!data.format) {\n        return false;\n      }\n      if (!data.delimiter) {\n        return false;\n      }\n      if (!data.today) {\n        return false;\n      }\n      if (!data.years) {\n        return false;\n      }\n      if (!Object.keys(data.years)[0]) {\n        return false;\n      }\n      if (!Object.keys(Object.keys(data.years)[0])[0]) {\n        return false;\n      }\n      return true;\n    },\n    setData: function(source, storeId) {\n      if (!exports.isDataValid(source)) {\n        console.error(MESSAGES.sourceDataNotValid);\n        return false;\n      }\n      exports.data[storeId] = JSON.parse(JSON.stringify(source));\n      exports.data[storeId].today.date = exports.data[storeId].today.date * 1000;\n      return exports.data[storeId];\n    }\n  };\n}]);\n\nangular.module('bdate', ['bdate.datepicker']).constant('MESSAGES', {\n  invalidParams: 'Invalid params',\n  errorOnChangeMonthOrYear: 'cannot change month or year',\n  sourceDataNotValid: 'source data(json)is not valid',\n  dateNotReady: 'source data(json)is not ready(null?)',\n  daysNameNotValid: 'days names array not valid',\n  monthNameNotValid: 'month names object not valid',\n  yearNotExist: 'year not exist in source data'\n});\n\nangular.module('bdate.popup', ['bdate.utils', 'bdate.data', 'bdate.templates']).directive('bdatePopup', ['bDateUtils', 'bDataFactory', 'MESSAGES', function(bDateUtils, bDataFactory, MESSAGES) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'popup.html',\n    scope: {\n      popupState: '=',\n      dateModel: '=',\n      dateStoreId: '@?'\n    },\n    link: function(scope) {\n      var getPositionInArray, reloadSelectViewDate, setInitViewedDate;\n      scope.popup = {\n        hidePopup: function() {\n          return scope.popupState.isOpen = false;\n        },\n        selectDate: function(date) {\n          scope.data.setDateModel(date);\n          return scope.popup.hidePopup();\n        }\n      };\n      setInitViewedDate = function(dateSource) {\n        var day, month, year;\n        year = null;\n        month = null;\n        day = null;\n        if (scope.dateModel && !angular.equals({}, scope.dateModel)) {\n          year = scope.dateModel.year;\n          month = scope.dateModel.month;\n          day = scope.dateModel.day;\n        } else if (bDateUtils.sourceCheckers.month.isMonthExist(dateSource.today.year, dateSource.today.month, scope.dateStoreId)) {\n          year = dateSource.today.year;\n          month = dateSource.today.month;\n        } else {\n          year = bDateUtils.sourceCheckers.year.getFirstYear(scope.dateStoreId);\n          month = bDateUtils.sourceCheckers.month.getFirstMonth(year, scope.dateStoreId);\n        }\n        scope.data.setViewedDate(year, month, day);\n        scope.data.yearsList = bDateUtils.getYearsAsFlatArr(scope.dateStoreId);\n        return reloadSelectViewDate(year);\n      };\n      getPositionInArray = function(val, arr) {\n        var i;\n        i = 0;\n        while (i < arr.length) {\n          if (+arr[i] === +val) {\n            return i;\n          }\n          i++;\n        }\n        console.error(MESSAGES.yearNotExist);\n        return -1;\n      };\n      scope.$watch('data.viewedDate.year.number', function(year) {\n        if (!year) {\n          return;\n        }\n        return reloadSelectViewDate(year);\n      });\n      reloadSelectViewDate = function(year) {\n        var viewedYearNumberInArr;\n        viewedYearNumberInArr = getPositionInArray(year, scope.data.yearsList);\n        return scope.selectViewedYear = scope.data.yearsList[viewedYearNumberInArr];\n      };\n      scope.data = {\n        setDateModel: function(dateModel) {\n          if (!dateModel) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.dateModel = dateModel;\n        },\n        format: null,\n        setFormat: function(format) {\n          if (!format) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.format = format;\n        },\n        viewedDate: null,\n        setViewedDate: function(yearNum, monthNum, dayNum) {\n          var ref;\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          dayNum = (ref = dayNum) != null ? ref : +{\n            dayNum: 1\n          };\n          scope.data.viewedDate = {\n            year: {\n              first: bDateUtils.sourceCheckers.year.getFirstYear(scope.dateStoreId),\n              last: bDateUtils.sourceCheckers.year.getLastYear(scope.dateStoreId),\n              number: +yearNum,\n              count: +Object.keys(bDataFactory.data[scope.dateStoreId].years).length\n            },\n            month: {\n              first: bDateUtils.sourceCheckers.month.getFirstMonth(yearNum, scope.dateStoreId),\n              last: bDateUtils.sourceCheckers.month.getLastMonth(yearNum, scope.dateStoreId),\n              daysTotal: +bDataFactory.data[scope.dateStoreId].years[yearNum][monthNum].days_total,\n              startDay: +bDataFactory.data[scope.dateStoreId].years[yearNum][monthNum].start_day,\n              number: +monthNum,\n              name: bDateUtils.getMonthName(monthNum),\n              count: +Object.keys(bDataFactory.data[scope.dateStoreId].years[yearNum]).length\n            },\n            day: {\n              number: dayNum\n            }\n          };\n          return scope.data.viewedDate.days = scope.data.getDaysArr(scope.data.viewedDate.year, scope.data.viewedDate.month);\n        },\n        yearsList: [],\n        daysOfWeek: {\n          get: function() {\n            return bDateUtils.daysOfWeek;\n          },\n          getShorts: function() {\n            return bDateUtils.getDaysOfWeekShorts();\n          }\n        },\n        today: null,\n        setToday: function(today) {\n          if (!today) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.today = today;\n        },\n        _getPrevMonthTailDaysArr: function(yearNum, monthNum, startDay) {\n          var i, isPrevMonthExist, prevMonthDate, prevMonthDaysCount, result;\n          result = [];\n          prevMonthDate = {\n            day: null,\n            month: null,\n            year: null\n          };\n          isPrevMonthExist = bDateUtils.sourceCheckers.month.isPrevMonthExist(yearNum, monthNum, scope.dateStoreId);\n          prevMonthDaysCount = 0;\n          if (isPrevMonthExist) {\n            prevMonthDate = bDateUtils.sourceCheckers.month.getPrevMonthObj(yearNum, monthNum, scope.dateStoreId);\n            prevMonthDaysCount = new Date(prevMonthDate.year, prevMonthDate.month, 0).getDate();\n          }\n          i = 0;\n          while (i < startDay - 1) {\n            result.unshift({\n              day: isPrevMonthExist ? prevMonthDaysCount - i : \"\",\n              month: isPrevMonthExist ? prevMonthDate.month : null,\n              year: isPrevMonthExist ? prevMonthDate.year : null,\n              isOtherMonth: true,\n              isLocked: !isPrevMonthExist\n            });\n            i++;\n          }\n          return result;\n        },\n        _getNextMonthTailDaysArr: function(yearNum, monthNum, startDay, daysCount, daysArr) {\n          var daysInWeek, expectedWeeksCount, i, isNextMonthExist, nextMonthDate, result;\n          result = [];\n          daysInWeek = 7;\n          expectedWeeksCount = Math.ceil(daysArr.length / daysInWeek);\n          if ((daysArr.length / daysInWeek) === Math.floor(daysArr.length / daysInWeek)) {\n            return result;\n          }\n          nextMonthDate = {\n            day: null,\n            month: null,\n            year: null\n          };\n          isNextMonthExist = bDateUtils.sourceCheckers.month.isNextMonthExist(yearNum, monthNum, scope.dateStoreId);\n          if (isNextMonthExist) {\n            nextMonthDate = bDateUtils.sourceCheckers.month.getNextMonthObj(yearNum, monthNum, scope.dateStoreId);\n          }\n          i = daysArr.length;\n          while (i < (expectedWeeksCount * daysInWeek)) {\n            daysArr.push({\n              day: isNextMonthExist ? i - (daysCount + startDay - 2) : \"\",\n              month: isNextMonthExist ? nextMonthDate.month : null,\n              year: isNextMonthExist ? nextMonthDate.year : null,\n              isOtherMonth: true,\n              isLocked: !isNextMonthExist\n            });\n            i++;\n          }\n          return result;\n        },\n        _getMonthDaysArr: function(yearNum, monthNum, daysCount) {\n          var i, result;\n          result = [];\n          i = 1;\n          while (i <= daysCount) {\n            result.push({\n              day: i,\n              month: monthNum,\n              year: yearNum\n            });\n            i++;\n          }\n          return result;\n        },\n        _markToday: function(daysArr) {\n          var i;\n          i = 1;\n          while (i < daysArr.length) {\n            if (daysArr[i].day === scope.data.today.day) {\n              daysArr[i].isToday = true;\n            }\n            i++;\n          }\n          return daysArr;\n        },\n        getDaysArr: function(year, month) {\n          var currentMonthDaysArr, daysCount, nextMonthTailDaysArr, prevMonthTailDaysArr, result, startDay;\n          daysCount = +month.daysTotal;\n          startDay = +month.startDay;\n          prevMonthTailDaysArr = scope.data._getPrevMonthTailDaysArr(year.number, month.number, startDay);\n          currentMonthDaysArr = scope.data._getMonthDaysArr(year.number, month.number, daysCount);\n          if (year.number === scope.data.today.year && month.number === scope.data.today.month) {\n            currentMonthDaysArr = scope.data._markToday(currentMonthDaysArr);\n          }\n          result = prevMonthTailDaysArr.concat(currentMonthDaysArr);\n          nextMonthTailDaysArr = scope.data._getNextMonthTailDaysArr(year.number, month.number, startDay, daysCount, result);\n          result = result.concat(nextMonthTailDaysArr);\n          return result;\n        },\n        goNextMonth: function(isForward) {\n          var nextObj;\n          nextObj = bDateUtils.sourceCheckers.month.getNextAvailableMonth(isForward, scope.data.viewedDate.year.number, scope.data.viewedDate.month.number, scope.dateStoreId);\n          if (nextObj) {\n            return scope.data.setViewedDate(nextObj.year, nextObj.month);\n          }\n        },\n        goNextYear: function(isForward) {\n          var nextObj;\n          nextObj = bDateUtils.sourceCheckers.year.getNextAvailableYear(isForward, scope.data.viewedDate.year.number, scope.data.viewedDate.month.number, scope.dateStoreId);\n          if (nextObj) {\n            return scope.data.setViewedDate(nextObj.year, nextObj.month);\n          }\n        },\n        goToYear: function(yearNum) {\n          var monthNum;\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          if (!bDateUtils.sourceCheckers.year.isYearExist(yearNum, scope.dateStoreId)) {\n            return console.error(MESSAGES.yearNotExist);\n          }\n          if (bDateUtils.sourceCheckers.month.isMonthExist(yearNum, scope.data.viewedDate.month.number, scope.dateStoreId)) {\n            monthNum = +scope.data.viewedDate.month.number;\n          } else {\n            monthNum = +bDateUtils.sourceCheckers.month.getFirstMonth(yearNum, scope.dateStoreId);\n          }\n          return scope.data.setViewedDate(yearNum, monthNum, scope.data.viewedDate.day.number);\n        },\n        init: function(dateSource) {\n          scope.data.setFormat(dateSource.format);\n          scope.data.setToday(dateSource.today);\n          return setInitViewedDate(dateSource);\n        }\n      };\n      (function() {\n        if (bDataFactory.isDataReady(scope.dateStoreId)) {\n          scope.data.init(bDataFactory.data[scope.dateStoreId]);\n        }\n        return scope.bDateUtils = bDateUtils;\n      })();\n      scope.$watch((function() {\n        return bDataFactory.data[scope.dateStoreId];\n      }), (function() {\n        if (bDataFactory.isDataReady(scope.dateStoreId)) {\n          return scope.data.init(bDataFactory.data[scope.dateStoreId]);\n        }\n      }), true);\n      return scope.$watch('popupState.isOpen', function() {\n        if (scope.popupState.isOpen && (scope.dateModel && !angular.equals({}, scope.dateModel))) {\n          scope.data.setDateModel(scope.dateModel);\n          return scope.data.setViewedDate(scope.dateModel.year, scope.dateModel.month, scope.dateModel.day);\n        }\n      });\n    }\n  };\n}]);\n\nangular.module('bdate.utils', ['bdate.data']).factory('bDateUtils', ['MESSAGES', 'bDataFactory', function(MESSAGES, bDataFactory) {\n  var exports;\n  return exports = {\n    getDaysOfWeekShorts: function() {\n      var i, result;\n      i = 0;\n      result = [];\n      while (i < bDataFactory.daysNames.length) {\n        result.push(bDataFactory.daysNames[i].short);\n        i++;\n      }\n      return result;\n    },\n    getMonthName: function(number) {\n      return bDataFactory.monthNames[number].name;\n    },\n    getYearsAsFlatArr: function(dateStoreId) {\n      return Object.keys(bDataFactory.data[dateStoreId].years);\n    },\n    makeDateModel: function(datetime) {\n      var date, day, month, year;\n      date = new Date(datetime);\n      day = date.getDate();\n      month = date.getMonth() + 1;\n      year = date.getFullYear();\n      return {\n        day: day,\n        month: month,\n        year: year\n      };\n    },\n    stringToDate: function(dateStr, format, delimiter) {\n      var dateItems, day, dayIndex, formatItems, formatLowerCase, month, monthIndex, year, yearIndex;\n      formatLowerCase = format.toLowerCase();\n      formatItems = formatLowerCase.split(delimiter);\n      dateItems = dateStr.split(delimiter);\n      monthIndex = formatItems.indexOf('mm');\n      dayIndex = formatItems.indexOf('dd');\n      yearIndex = formatItems.indexOf('yyyy');\n      year = +dateItems[yearIndex];\n      month = +dateItems[monthIndex] - 1;\n      day = +dateItems[dayIndex];\n      if (month > 12) {\n        return false;\n      }\n      if (day > 31) {\n        return false;\n      }\n      return new Date(year, month, day);\n    },\n    isValidDate: function(date) {\n      if (!angular.isDate) {\n        date = new Date(date);\n      }\n      if (isNaN(date.getTime())) {\n        return false;\n      }\n    },\n    sourceCheckers: {\n      month: {\n        isMonthExist: function(yearNum, monthNum, storeId) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return false;\n          }\n          if (!bDataFactory.data[storeId].years[yearNum]) {\n            return false;\n          }\n          return !!bDataFactory.data[storeId].years[yearNum][monthNum];\n        },\n        isPrevMonthExist: function(yearNum, curMonthNum, storeId) {\n          var isFirstMonth, isFirstYear, lastMonthOfPrevYearNum, prevMonthNum, prevYearNum;\n          if (!yearNum || !curMonthNum) {\n            return false;\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          if (!exports.sourceCheckers.month.isMonthExist(yearNum, curMonthNum, storeId)) {\n            return false;\n          }\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, curMonthNum, storeId);\n          if (!isFirstMonth) {\n            prevMonthNum = curMonthNum - 1;\n            return exports.sourceCheckers.month.isMonthExist(yearNum, prevMonthNum, storeId);\n          } else {\n            isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum, storeId);\n            if (!isFirstYear) {\n              prevYearNum = yearNum - 1;\n              lastMonthOfPrevYearNum = exports.sourceCheckers.month.getLastMonth(prevYearNum, storeId);\n              return exports.sourceCheckers.month.isMonthExist(prevYearNum, lastMonthOfPrevYearNum, storeId);\n            } else {\n              return false;\n            }\n          }\n        },\n        getPrevMonthObj: function(yearNum, curMonthNum, storeId) {\n          var isFirstMonth, isFirstYear, lastMonthOfPrevYearNum, prevMonthNum, prevYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, curMonthNum, storeId);\n          if (!isFirstMonth) {\n            prevMonthNum = curMonthNum - 1;\n            if (exports.sourceCheckers.month.isMonthExist(yearNum, prevMonthNum, storeId)) {\n              return {\n                year: yearNum,\n                month: prevMonthNum\n              };\n            } else {\n              return null;\n            }\n          } else {\n            isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum, storeId);\n            if (!isFirstYear) {\n              prevYearNum = yearNum - 1;\n              lastMonthOfPrevYearNum = exports.sourceCheckers.month.getLastMonth(prevYearNum, storeId);\n              if (exports.sourceCheckers.month.isMonthExist(prevYearNum, lastMonthOfPrevYearNum, storeId)) {\n                return {\n                  year: prevYearNum,\n                  month: lastMonthOfPrevYearNum\n                };\n              } else {\n                return null;\n              }\n            } else {\n              return null;\n            }\n          }\n        },\n        isNextMonthExist: function(yearNum, curMonthNum, storeId) {\n          var firstMonthOfNextYearNum, isLastMonth, isLastYear, nextMonthNum, nextYearNum;\n          if (!yearNum || !curMonthNum) {\n            return false;\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          if (!exports.sourceCheckers.month.isMonthExist(yearNum, curMonthNum, storeId)) {\n            return false;\n          }\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, curMonthNum, storeId);\n          if (!isLastMonth) {\n            nextMonthNum = curMonthNum + 1;\n            return exports.sourceCheckers.month.isMonthExist(yearNum, nextMonthNum, storeId);\n          } else {\n            isLastYear = exports.sourceCheckers.year.isLastYear(yearNum, storeId);\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              firstMonthOfNextYearNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum, storeId);\n              return exports.sourceCheckers.month.isMonthExist(nextYearNum, firstMonthOfNextYearNum, storeId);\n            } else {\n              return false;\n            }\n          }\n        },\n        getNextMonthObj: function(yearNum, curMonthNum, storeId) {\n          var firstMonthOfNextYearNum, isLastMonth, isLastYear, nextMonthNum, nextYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, curMonthNum, storeId);\n          if (!isLastMonth) {\n            nextMonthNum = curMonthNum + 1;\n            if (exports.sourceCheckers.month.isMonthExist(yearNum, nextMonthNum, storeId)) {\n              return {\n                year: yearNum,\n                month: nextMonthNum\n              };\n            } else {\n              return null;\n            }\n          } else {\n            isLastYear = exports.sourceCheckers.year.isLastYear(yearNum, storeId);\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              firstMonthOfNextYearNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum, storeId);\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, firstMonthOfNextYearNum, storeId)) {\n                return {\n                  year: nextYearNum,\n                  month: firstMonthOfNextYearNum\n                };\n              } else {\n                return null;\n              }\n            } else {\n              return null;\n            }\n          }\n        },\n        getMonth: function(yearNum, monthNum, storeId) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          return bDataFactory.data[storeId].years[yearNum][monthNum];\n        },\n        isFirstMonth: function(yearNum, monthNum, storeId) {\n          var first, month;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          month = Object.keys(bDataFactory.data[storeId].years[yearNum]);\n          first = Math.min.apply(Math, month);\n          return monthNum === first;\n        },\n        getFirstMonth: function(yearNum, storeId) {\n          var month;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          yearNum = +yearNum;\n          month = Object.keys(bDataFactory.data[storeId].years[yearNum]);\n          return Math.min.apply(Math, month);\n        },\n        isLastMonth: function(yearNum, monthNum, storeId) {\n          var last, month;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          month = Object.keys(bDataFactory.data[storeId].years[yearNum]);\n          last = Math.max.apply(Math, month);\n          return monthNum === last;\n        },\n        getLastMonth: function(yearNum, storeId) {\n          var month;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          yearNum = +yearNum;\n          month = Object.keys(bDataFactory.data[storeId].years[yearNum]);\n          return Math.max.apply(Math, month);\n        },\n        getNextAvailableMonth: function(isForward, yearNum, monthNum, storeId) {\n          var isFirstMonth, isLastMonth, nextMonthNum, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, monthNum, storeId);\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, monthNum, storeId);\n          nextYearNum = yearNum;\n          nextMonthNum = monthNum;\n          if (isForward) {\n            if (!isLastMonth) {\n              nextMonthNum = monthNum + 1;\n            } else {\n              nextYearNum = yearNum + 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum, storeId)) {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum, storeId);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          } else if (!isForward) {\n            if (!isFirstMonth) {\n              nextMonthNum = monthNum - 1;\n            } else {\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum, storeId)) {\n                nextMonthNum = exports.sourceCheckers.month.getLastMonth(nextYearNum, storeId);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonthNum\n          };\n        }\n      },\n      year: {\n        isYearExist: function(yearNum, storeId) {\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          if (!bDataFactory.isDataReady(storeId)) {\n            return false;\n          }\n          yearNum = +yearNum;\n          return !!bDataFactory.data[storeId].years[yearNum];\n        },\n        getYear: function(yearNum, storeId) {\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          return bDataFactory.data[storeId].years[yearNum];\n        },\n        isFirstYear: function(yearNum, storeId) {\n          var first, years;\n          yearNum = +yearNum;\n          years = Object.keys(bDataFactory.data[storeId].years);\n          first = Math.min.apply(Math, years);\n          return yearNum === first;\n        },\n        getFirstYear: function(storeId) {\n          var years;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          years = Object.keys(bDataFactory.data[storeId].years);\n          return Math.min.apply(Math, years);\n        },\n        isLastYear: function(yearNum, storeId) {\n          var last, years;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          yearNum = +yearNum;\n          years = Object.keys(bDataFactory.data[storeId].years);\n          last = Math.max.apply(Math, years);\n          return yearNum === last;\n        },\n        getLastYear: function(storeId) {\n          var years;\n          if (!bDataFactory.isDataReady(storeId)) {\n            return console.error(MESSAGES.dateNotReady);\n          }\n          years = Object.keys(bDataFactory.data[storeId].years);\n          return Math.max.apply(Math, years);\n        },\n        getNextAvailableYear: function(isForward, yearNum, monthNum, storeId) {\n          var isFirstYear, isLastYear, nextMonthNum, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum, storeId);\n          isLastYear = exports.sourceCheckers.year.isLastYear(yearNum, storeId);\n          nextYearNum = yearNum;\n          nextMonthNum = monthNum;\n          if (isForward) {\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, monthNum, storeId)) {\n                nextMonthNum = monthNum;\n              } else {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum, storeId);\n              }\n            } else {\n              return false;\n            }\n          } else if (!isForward) {\n            if (!isFirstYear) {\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, monthNum, storeId)) {\n                nextMonthNum = monthNum;\n              } else {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum, storeId);\n              }\n            } else {\n              return false;\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonthNum\n          };\n        }\n      }\n    }\n  };\n}]);\n\nangular.module(\"bdate.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"bdate.html\",\"<div ng-class=\\\"{b_datepicker_in_progress: !isDataReady}\\\" class=\\\"b_datepicker_root {{::bRootClasses}}\\\"><input type=text ng-model=date.viewed placeholder={{placeholder}} ng-click=popup.togglePopup() ng-disabled=!isDataReady readonly=readonly class=\\\"b_datepicker_input {{::bInputClasses}}\\\"><button type=button ng-click=popup.togglePopup() ng-disabled=!isDataReady class=\\\"b_datepicker_button {{::bButtonClasses}}\\\">&nbsp;</button><bdate-popup popup-state=popup.state date-model=date.model date-store-id={{::dateStoreId}} class={{::bPopupClasses}}></bdate-popup></div>\");\n$templateCache.put(\"popup.html\",\"<div ng-show=popupState.isOpen class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=data.goNextYear(false) ng-disabled=\\\"!bDateUtils.sourceCheckers.year.isYearExist(data.viewedDate.year.number - 1, dateStoreId)\\\" class=\\\"b_popup_btn b_btn_prev\\\">&#9664;&#9664;</button><button type=button ng-click=data.goNextMonth(false) ng-disabled=\\\"!bDateUtils.sourceCheckers.month.isPrevMonthExist(data.viewedDate.year.number, data.viewedDate.month.number, dateStoreId)\\\" class=\\\"b_popup_btn b_btn_prev\\\">&#9664;</button></div><div ng-bind=data.viewedDate.month.name class=b_popup_month></div>&nbsp;<select ng-model=selectViewedYear ng-options=\\\"year for year in data.yearsList\\\" ng-change=data.goToYear(selectViewedYear) class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=data.goNextMonth(true) ng-disabled=\\\"!bDateUtils.sourceCheckers.month.isNextMonthExist(data.viewedDate.year.number, data.viewedDate.month.number, dateStoreId)\\\" class=\\\"b_popup_btn b_btn_next\\\">&#9654;</button><button type=button ng-click=data.goNextYear(true) ng-disabled=\\\"!bDateUtils.sourceCheckers.year.isYearExist(data.viewedDate.year.number + 1, dateStoreId)\\\" class=\\\"b_popup_btn b_btn_next\\\">&#9654;&#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat=\\\"dayOfWeek in ::data.daysOfWeek.getShorts()\\\" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat=\\\"date in data.viewedDate.days track by $index\\\" ng-class=\\\"{b_popup_today_day_container: date.isToday}\\\" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isLocked ng-class=\\\"{b_popup_cur_month_day: !date.isOtherMonth, b_popup_today_day: date.isToday, b_popup_selected_day: date.day == dateModel.day &amp;&amp; date.month == dateModel.month &amp;&amp; date.year == dateModel.year, b_popup_locked_day: date.isLocked}\\\" class=b_popup_day_btn></button></td></tr></table><div ng-show=\\\"bDateUtils.isMonthExist(data.today.year, data.today.month, dateStoreId)\\\" class=b_popup_today><button type=button ng-bind=\\\"data.today.date | date:data.format\\\" ng-click=popup.selectDate(bDateUtils.makeDateModel(data.today.date)) class=b_popup_today_btn></button></div></div>\");}]);"],"sourceRoot":"/source/"}